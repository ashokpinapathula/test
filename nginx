server {
     server_name wso2km-poc.*;
     listen 443;
     listen [::]:443;


     ssl on;

     #ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
     ssl_certificate /etc/ssl/certs/server.crt;

     #ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
     ssl_certificate_key /etc/ssl/private/server.key;
     root /var/www/html;

     index index.html index.htm index.nginx-debian.html;

     location / {
             proxy_set_header X-Forwarded-Host $host;
             proxy_set_header X-Forwarded-Server $host;
             proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header Host $http_host;
             proxy_read_timeout 5m;
             proxy_send_timeout 5m;

             #proxy_pass  https://10.26.37.168:31833;

             #Hitting wso2services directly
             proxy_pass  https://10.26.34.218:30699;
             proxy_http_version 1.1;
                             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
     }

 }


 server {
     server_name wso2am-poc.*;
     listen 443 default_server;
     listen [::]:443 default_server;
     

     ssl on;
     
     #ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
     ssl_certificate /etc/ssl/certs/server.crt;
     
     #ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
     ssl_certificate_key /etc/ssl/private/server.key;
     root /var/www/html;

     index index.html index.htm index.nginx-debian.html;

     location / {
             proxy_set_header X-Forwarded-Host $host;
             proxy_set_header X-Forwarded-Server $host;
             proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             proxy_set_header Host $http_host;
             proxy_read_timeout 5m;
             proxy_send_timeout 5m;

             #proxy_pass  https://10.26.37.168:31833;

             #Hitting wso2services directly
             proxy_pass  https://10.26.34.218:30071;
             proxy_http_version 1.1;
                             proxy_set_header Upgrade $http_upgrade;
             proxy_set_header Connection "upgrade";
     }

 }
